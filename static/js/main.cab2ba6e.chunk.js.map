{"version":3,"sources":["App.js","index.js"],"names":["App","date","Date","fullTime","toLocaleTimeString","useState","main","setMain","secondary","setSecondary","slice","time","setTime","isCounted","length","isError","isHugeNum","includes","allClear","del","prev","substr","onPlusMinusBtnClick","onNumInput","num","onOperationInput","operation","onDotInput","onEqualInput","expression","result","eval","err","useEffect","intervalId","setInterval","currentFullTime","clearInterval","onKeydown","event","key","window","addEventListener","removeEventListener","className","type","onClick","e","target","textContent","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cab2ba6e.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\"\nimport \"./App.scss\"\n\nfunction App() {\n  const date = new Date()\n  const fullTime = date.toLocaleTimeString() // hh:mm:ss\n\n  const [main, setMain] = useState(\"0\")\n  const [secondary, setSecondary] = useState(\"\")\n  const [time, setTime] = useState(fullTime.slice(0, 5))\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      const currentDate = new Date()\n      const currentFullTime = currentDate.toLocaleTimeString() // hh:mm:ss\n\n      setTime(currentFullTime.slice(0, 5))\n    }, 1000)\n\n    return () => clearInterval(intervalId)\n  }, [])\n\n  useEffect(() => {\n    function onKeydown(event) {\n      const { key } = event\n      const nums = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]\n      const operations = [\"/\", \"*\", \"-\", \"+\"]\n\n      if (key === \"Escape\" || key === \"Delete\") allClear()\n      if (key === \"Backspace\") del()\n      if (nums.includes(key)) onNumInput(key)\n      if (operations.includes(key)) onOperationInput(key)\n      if (key === \".\" || key === \",\") onDotInput()\n      if (key === \"=\") onEqualInput()\n    }\n\n    window.addEventListener(\"keydown\", onKeydown)\n\n    return () => window.removeEventListener(\"keydown\", onKeydown)\n  }, [main, secondary])\n\n  function isCounted() {\n    return secondary[secondary.length - 1] === \"=\"\n  }\n  function isError() {\n    return main === \"Error\"\n  }\n  function isHugeNum() {\n    return main.includes(\"...\")\n  }\n  function allClear() {\n    setMain(\"0\")\n    setSecondary(\"\")\n  }\n  function del() {\n    if (isCounted() || isError() || isHugeNum()) return allClear()\n\n    setMain((prev) => (prev.length > 1 ? prev.substr(0, prev.length - 1) : \"0\"))\n  }\n  function onPlusMinusBtnClick() {\n    if (isError() || isHugeNum()) return\n\n    setMain((prev) => `${prev * -1}`)\n  }\n  function onNumInput(num) {\n    if (isCounted() || isError() || isHugeNum()) allClear()\n\n    setMain((prev) => {\n      if (prev.length > 11) {\n        return prev\n      }\n\n      return prev === \"0\" ? num : `${prev}${num}`\n    })\n  }\n  function onOperationInput(operation) {\n    if (isError() || isHugeNum()) return\n    if (isCounted()) setSecondary(\"\")\n\n    setSecondary((prev) => `${prev === \"\" ? main : prev + main}${operation}`)\n    setMain(\"0\")\n  }\n  function onDotInput() {\n    if (isCounted() || isError() || isHugeNum()) allClear()\n\n    setMain((prev) => (prev.includes(\".\") ? prev : `${prev}.`))\n  }\n  function onEqualInput() {\n    if (secondary === \"\" || isCounted() || isHugeNum()) return\n\n    const expression = `${secondary + main}`\n\n    if (expression === \"0.1+0.2\" || expression === \"0.2+0.1\") {\n      setMain(\"0.3\")\n      setSecondary(`${expression}=`)\n      return\n    }\n\n    try {\n      //! eval() считается небезопасной функцией, но в pet-проекте сойдет =)\n      let result = `${eval(expression)}`\n      if (result.length > 12) result = `${result.substr(0, 12)}...`\n      setMain(result)\n      setSecondary((prev) => `${prev === \"\" ? main : prev + main}=`)\n    } catch (err) {\n      allClear()\n      setMain(\"Error\")\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <div className=\"calculator\">\n        <div className=\"result\">\n          <span className=\"time\">{time}</span>\n          <span className={secondary.length > 20 ? \"secondary small\" : \"secondary\"}>{secondary}</span>\n          <span className={main.length > 9 ? \"main small\" : \"main\"}>{main}</span>\n        </div>\n        <div className=\"buttons\">\n          <button type=\"button\" className=\"dif-op\" onClick={allClear}>\n            AC\n          </button>\n          <button type=\"button\" className=\"dif-op\" onClick={del}>\n            D\n          </button>\n          <button type=\"button\" className=\"dif-op\" onClick={onPlusMinusBtnClick}>\n            +/-\n          </button>\n          <button type=\"button\" className=\"operation\" onClick={(e) => onOperationInput(e.target.textContent)}>\n            /\n          </button>\n          <button type=\"button\" className=\"num\" onClick={(e) => onNumInput(e.target.textContent)}>\n            7\n          </button>\n          <button type=\"button\" className=\"num\" onClick={(e) => onNumInput(e.target.textContent)}>\n            8\n          </button>\n          <button type=\"button\" className=\"num\" onClick={(e) => onNumInput(e.target.textContent)}>\n            9\n          </button>\n          <button type=\"button\" className=\"operation\" onClick={(e) => onOperationInput(e.target.textContent)}>\n            *\n          </button>\n          <button type=\"button\" className=\"num\" onClick={(e) => onNumInput(e.target.textContent)}>\n            4\n          </button>\n          <button type=\"button\" className=\"num\" onClick={(e) => onNumInput(e.target.textContent)}>\n            5\n          </button>\n          <button type=\"button\" className=\"num\" onClick={(e) => onNumInput(e.target.textContent)}>\n            6\n          </button>\n          <button type=\"button\" className=\"operation\" onClick={(e) => onOperationInput(e.target.textContent)}>\n            -\n          </button>\n          <button type=\"button\" className=\"num\" onClick={(e) => onNumInput(e.target.textContent)}>\n            1\n          </button>\n          <button type=\"button\" className=\"num\" onClick={(e) => onNumInput(e.target.textContent)}>\n            2\n          </button>\n          <button type=\"button\" className=\"num\" onClick={(e) => onNumInput(e.target.textContent)}>\n            3\n          </button>\n          <button type=\"button\" className=\"operation\" onClick={(e) => onOperationInput(e.target.textContent)}>\n            +\n          </button>\n          <button type=\"button\" className=\"num doubled-right\" onClick={(e) => onNumInput(e.target.textContent)}>\n            0\n          </button>\n          <button type=\"button\" className=\"num\" onClick={onDotInput}>\n            .\n          </button>\n          <button type=\"button\" className=\"operation\" onClick={onEqualInput}>\n            =\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}